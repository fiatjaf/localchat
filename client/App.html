<!-- @format -->

<script>
  import {onMount} from 'svelte'

  import Room from './Room.html'

  var room

  onMount(async () => {
    let {ip, type} = await getInfo()
    if (!room) {
      room = ip
    }
  })

  async function getInfo() {
    return await (await fetch('/info', {mode: 'no-cors'})).json()
  }
</script>

<svelte:head>
  <title>localchat - {room}</title>
</svelte:head>

<header>
  <div id="logo">
    <h1><a href="#/">localchat</a> - {room}</h1>
  </div>
</header>

{#if room}
<Room room="{room}" />
{:else} loading... {/if}
