<!-- @format -->

<script>
  import {onMount} from 'svelte'
  import {navigateTo, router} from 'yrv'

  onMount(async () => {
    let {ip, type} = await getInfo()
    if (!$router.params.room) {
      navigateTo('/' + ip, {replace: true})
    }
  })

  async function getInfo() {
    return await (await fetch('/info', {mode: 'no-cors'})).json()
  }
</script>
